<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>10-Finger Tipp-Akademie Pro</title>
<style>
  :root { 
    --primary: #3498db; --secondary: #2c3e50; --bg: #f4f7f6;
    --f1: #ff7675; --f2: #fab1a0; --f3: #ffeaa7; --f4: #55efc4; 
    --f5: #81ecec; --f6: #74b9ff; --f7: #a29bfe; --f8: #fd79a8;
  }
  body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 10px; text-align: center; overflow-x: hidden; }
  .container { max-width: 1100px; margin: auto; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
  
  .tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; }
  .tab-btn { padding: 10px 20px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; background: #e0e0e0; transition: 0.3s; }
  .tab-btn.active { background: var(--primary); color: white; }

  #display { 
    background: #1e1e1e; color: #fff; padding: 25px; border-radius: 15px; font-size: 26px;
    font-family: 'Courier New', monospace; height: 180px; line-height: 1.6; margin-bottom: 15px;
    border: 3px solid #333; overflow-y: auto; text-align: left; white-space: pre-wrap;
    scroll-behavior: smooth; position: relative;
  }
  .char.current { border-bottom: 4px solid var(--primary); background: #333; color: var(--primary); position: relative; }
  .char.correct { color: #2ecc71; }
  .char.incorrect { color: #e74c3c; background: rgba(231, 76, 60, 0.3); }

  /* Hand & Finger Visualisierung */
  #hands-container {
    position: relative; width: 600px; height: 120px; margin: 0 auto 10px auto;
    background: rgba(236, 240, 241, 0.5); border-radius: 50px; display: none;
  }
  .hand-visual { position: absolute; bottom: 0; width: 220px; opacity: 0.6; transition: 0.3s; }
  .hand-left { left: 50px; } .hand-right { right: 50px; }
  .finger-indicator {
    position: absolute; width: 25px; height: 25px; border-radius: 50%;
    background: var(--primary); box-shadow: 0 0 15px var(--primary);
    display: none; z-index: 10; transform: translate(-50%, -50%);
    border: 3px solid white; animation: pulse 1s infinite;
  }

  @keyframes pulse { 0% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.2); } 100% { transform: translate(-50%, -50%) scale(1); } }

  .keyboard { background: #2d3436; padding: 10px; border-radius: 15px; display: inline-block; position: relative; }
  .row { display: flex; justify-content: center; gap: 4px; margin-bottom: 4px; }
  .key { width: 44px; height: 44px; background: white; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: bold; border-bottom: 3px solid #bdc3c7; font-size: 15px; }
  .key.active { transform: translateY(2px); border-bottom: none; background: var(--primary) !important; color: white; box-shadow: 0 0 15px var(--primary); }
  
  #input-trigger { position: absolute; opacity: 0; }
  .stats { font-weight: bold; color: var(--secondary); margin-top: 10px; font-size: 1.1rem; }
  select { padding: 8px; border-radius: 8px; border: 2px solid #ddd; font-weight: bold; }
</style>
</head>
<body onclick="document.getElementById('input-trigger').focus()">

<div class="container">
  <h2 id="main-title">10-Finger Tipp-Trainer & Academy</h2>
  
  <div class="tabs">
    <button class="tab-btn active" id="tabTrainer" onclick="setMode('trainer')">Übungs-Trainer</button>
    <button class="tab-btn" id="tabLearn" onclick="setMode('learn')">Lern-Modus (mit Händen)</button>
  </div>

  <div style="margin-bottom: 15px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
    <select id="selLang" onchange="initGame()">
      <option value="de">Deutsch</option>
      <option value="sk">Slowakisch (Slovenčina)</option>
      <option value="ru">Russisch</option>
      <option value="en">Englisch</option>
      <option value="es">Spanisch</option>
    </select>
    
    <select id="selLength" onchange="initGame()">
      </select>
    
    <button onclick="initGame()" style="cursor:pointer; padding: 8px 20px; border-radius: 8px; background: #2ecc71; color: white; border: none; font-weight: bold;">Neustart</button>
  </div>

  <div id="hands-container">
    <div id="finger-point" class="finger-indicator"></div>
    <div style="position: absolute; left: 60px; bottom: 10px; font-weight: bold; color: #7f8c8d;">LINKE HAND</div>
    <div style="position: absolute; right: 60px; bottom: 10px; font-weight: bold; color: #7f8c8d;">RECHTE HAND</div>
  </div>

  <div id="display"></div>
  <input type="text" id="input-trigger" autocomplete="off" autofocus>

  <div class="keyboard" id="kb"></div>
  <div class="stats" id="stats">Fortschritt: 0% | Bitte klicken zum Starten</div>
</div>

<script>
// Wörterlisten inklusive Slowakisch
const wordLists = {
  de: ["Haus", "Garten", "Schule", "Lernen", "Tastatur", "Computer", "Arbeit", "Leben", "Zeit", "Himmel", "Welt", "Freund", "Essen", "Musik", "Wetter"],
  sk: ["dom", "záhrada", "škola", "učiť", "klávesnica", "počítač", "práca", "život", "čas", "nebo", "svet", "priateľ", "jedlo", "hudba", "počasie"],
  ru: ["дом", "сад", "школа", "учеба", "клавиатура", "компьютер", "работа", "жизнь", "время", "небо", "мир", "друг", "еда", "музыка", "погода"],
  en: ["house", "garden", "school", "learn", "keyboard", "computer", "work", "life", "time", "sky", "world", "friend", "food", "music", "weather"],
  es: ["casa", "jardín", "escuela", "aprender", "teclado", "computadora", "trabajo", "vida", "tiempo", "cielo", "mundo", "amigo", "comida", "música", "tiempo"]
};

// Finger-Positionen für die grafische Anzeige (X, Y Koordinaten im hands-container)
const fingerCoords = {
  "L1": {x: 80, y: 40, name: "Linker Kleiner Finger"},
  "L2": {x: 115, y: 25, name: "Linker Ringfinger"},
  "L3": {x: 155, y: 20, name: "Linker Mittelfinger"},
  "L4": {x: 200, y: 35, name: "Linker Zeigefinger"},
  "L5": {x: 250, y: 90, name: "Linker Daumen"},
  "R5": {x: 350, y: 90, name: "Rechter Daumen"},
  "R4": {x: 400, y: 35, name: "Rechter Zeigefinger"},
  "R3": {x: 445, y: 20, name: "Rechter Mittelfinger"},
  "R2": {x: 485, y: 25, name: "Rechter Ringfinger"},
  "R1": {x: 520, y: 40, name: "Rechter Kleiner Finger"}
};

// Zuordnung der Tasten zu den Fingern
const keyToFinger = {
  "1":"L1","Q":"L1","A":"L1","Y":"L1","Z":"L1","<":"L1",
  "2":"L2","W":"L2","S":"L2","X":"L2",
  "3":"L3","E":"L3","D":"L3","C":"L3",
  "4":"L4","R":"L4","F":"L4","V":"L4","5":"L4","T":"L4","G":"L4","B":"L4",
  "6":"R4","7":"R4","U":"R4","J":"R4","M":"R4","H":"R4","N":"R4",
  "8":"R3","I":"R3","K":"R3",",":"R3",
  "9":"R2","O":"R2","L":"R2",".":"R2",
  "0":"R1","P":"R1","Ö":"R1","Ä":"R1","Ü":"R1","ß":"R1","-":"R1",
  " ":"R5"
};

const layout = [
  ["1","2","3","4","5","6","7","8","9","0","ß"],
  ["Q","W","E","R","T","Z","U","I","O","P","Ü"],
  ["A","S","D","F","G","H","J","K","L","Ö","Ä"],
  ["Y","X","C","V","B","N","M",",",".","-"]
];

let currentText = "", idx = 0, currentMode = 'trainer';

// Initialisierung der Textlänge (100er Schritte)
const selLen = document.getElementById('selLength');
for(let i=100; i<=2000; i+=100) {
  let opt = document.createElement('option');
  opt.value = i; opt.innerText = i + " Wörter";
  if(i === 100) opt.selected = true;
  selLen.appendChild(opt);
}

function setMode(mode) {
  currentMode = mode;
  document.getElementById('tabTrainer').classList.toggle('active', mode === 'trainer');
  document.getElementById('tabLearn').classList.toggle('active', mode === 'learn');
  document.getElementById('hands-container').style.display = (mode === 'learn') ? 'block' : 'none';
  initGame();
}

function initGame() {
  const lang = document.getElementById('selLang').value;
  const count = parseInt(document.getElementById('selLength').value);
  const pool = wordLists[lang] || wordLists['de'];
  
  currentText = "";
  for(let i=0; i < count; i++) currentText += pool[Math.floor(Math.random()*pool.length)] + " ";
  currentText = currentText.trim();
  
  idx = 0;
  document.getElementById('input-trigger').value = "";
  renderKeyboard();
  renderDisplay();
  updateHints();
}

function renderKeyboard() {
  const kb = document.getElementById('kb'); kb.innerHTML = "";
  layout.forEach(row => {
    const rDiv = document.createElement('div'); rDiv.className = "row";
    row.forEach(k => {
      const kd = document.createElement('div'); kd.className = "key";
      kd.id = `k-${k}`; kd.innerText = k; rDiv.appendChild(kd);
    });
    kb.appendChild(rDiv);
  });
  kb.innerHTML += `<div class="row"><div class="key" id="k- " style="width:220px">LEERTASTE</div></div>`;
}

function renderDisplay() {
  const d = document.getElementById('display');
  d.innerHTML = currentText.split('').map((c, i) => `<span class="char ${i===0?'current':''}" id="char-${i}">${c}</span>`).join('');
}

function updateHints() {
  const char = currentText[idx]?.toUpperCase() || "";
  const fingerCode = keyToFinger[char];
  
  // Tastatur Highlighting
  document.querySelectorAll('.key').forEach(k => k.classList.remove('active'));
  const keyEl = document.getElementById(`k-${char === ' ' ? ' ' : char}`);
  if(keyEl) keyEl.classList.add('active');

  // Grafischer Finger-Punkt
  const dot = document.getElementById('finger-point');
  if (currentMode === 'learn' && fingerCode && fingerCoords[fingerCode]) {
    const pos = fingerCoords[fingerCode];
    dot.style.display = "block";
    dot.style.left = pos.x + "px";
    dot.style.top = pos.y + "px";
    document.getElementById('stats').innerText = `Tippe mit: ${pos.name}`;
  } else {
    dot.style.display = "none";
  }
}

document.getElementById('input-trigger').addEventListener('input', (e) => {
  const val = e.target.value;
  const chars = document.querySelectorAll('.char');
  
  if (currentMode === 'learn') {
    if (val[idx] === currentText[idx]) {
      chars[idx].classList.add('correct');
      idx++;
    } else {
      chars[idx].classList.add('incorrect');
      setTimeout(() => chars[idx].classList.remove('incorrect'), 200);
      e.target.value = val.substring(0, idx);
    }
  } else {
    if (val.length > idx) {
      chars[idx].classList.add(val[idx] === currentText[idx] ? 'correct' : 'incorrect');
      idx++;
    }
  }

  if (idx < currentText.length) {
    chars.forEach(c => c.classList.remove('current'));
    const nextChar = document.getElementById(`char-${idx}`);
    nextChar.classList.add('current');
    
    // Auto-Scroll
    nextChar.scrollIntoView({ behavior: 'smooth', block: 'center', container: document.getElementById('display') });
    
    updateHints();
    const progress = Math.floor((idx / currentText.length) * 100);
    if(currentMode !== 'learn') document.getElementById('stats').innerText = `Fortschritt: ${progress}% (${idx}/${currentText.length})`;
  } else {
    alert("Fertig! Super Training.");
    initGame();
  }
});

// Start
initGame();
</script>
</body>
</html>
